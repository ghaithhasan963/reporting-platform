{% extends 'base.html' %}
{% block title %}Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª | SaveNet{% endblock %}
{% block content %}

<div class="max-w-7xl mx-auto p-6">
  <h2 class="text-3xl font-bold text-center text-indigo-800 mb-6">ğŸ§­ Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡Ø§Øª Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ÙŠØ©</h2>
  <div id="map" class="w-full h-[600px] rounded-lg shadow-lg"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />

<script>
  const map = L.map('map').setView([33.5138, 36.2765], 12); // ØªÙ…ÙˆØ¶Ø¹ Ø¯Ù…Ø´Ù‚
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: 'Â© OpenStreetMap',
  }).addTo(map);

  const reports = {{ reports|tojson }};
  reports.forEach(r => {
    if (r.latitude && r.longitude) {
      L.marker([r.latitude, r.longitude])
        .addTo(map)
        .bindPopup(`
          <strong>ğŸ“Œ Ø§Ù„ØªØµÙ†ÙŠÙ:</strong> ${r.category}<br>
          <strong>ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${r.created_at}<br>
          <strong>ğŸ”” Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${r.approved === 'approved' ? 'âœ… Ù…Ù‚Ø¨ÙˆÙ„Ø©' : r.approved === 'rejected' ? 'âŒ Ù…Ø±ÙÙˆØ¶Ø©' : 'ğŸ•’ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©'}
        `);
    }
  });
</script>

{% endblock %}
